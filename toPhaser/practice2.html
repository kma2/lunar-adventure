<!doctype html> 
<html lang="en"> 
<head> 
	<meta charset="UTF-8" />
		<title>Phaser - Making your first game, part 9</title>
	<script type="text/javascript" src="phaser.min.js"></script>
		<style type="text/css">
				body {
						margin: 0;
				}
		</style>
</head>
<body>

<script type="text/javascript">

var game = new Phaser.Game(window.innerWidth, window.innerHeight, Phaser.AUTO, 'phaser-example', { preload: preload, create: create, update:update });

function preload() {
	game.load.image('car', 'rocket.png');
	game.load.image('planet', 'planet2.png');
}

function create() {
	game.physics.startSystem(Phaser.Physics.P2JS);
	game.physics.p2.gravity.y = 60;

	cursors = game.input.keyboard.createCursorKeys();

	//  ship
	ship = game.add.sprite(game.world.width/2, game.world.height/5, 'car');
	ship.scale.setTo(0.05, 0.05)

	game.physics.p2.enable(ship);
	ship.body.collideWorldBounds = true;


	//  planet

  // Here we create the planet.
  var planets = game.add.physicsGroup(Phaser.Physics.P2JS)
  var planet = planets.create(0, game.world.height - 64, 'planet');
  //  Scale it to fit the width of the game (the original sprite is 400x32 in size)
  planet.scale.setTo(4, 4);

  //  This stops it from falling away when you jump on it
  planet.body.immovable = true;

  //  Now let's create two ledges
  var ledge = platforms.create(-800, 420, 'planet');
  ledge.scale.setTo(5, 5)
  ledge.body.immovable = true;

};

function update() {
		// left key, rotate ship
		if (cursors.left.isDown) { ship.body.rotateLeft(100); }
		// right key, rotate ship
		else if (cursors.right.isDown){ ship.body.rotateRight(100); }
		// stop rotating if key is not pressed
		else { ship.body.setZeroRotation(); }
		// up key, accelerate
		if (cursors.up.isDown){ ship.body.thrust(200); }
		// down key, reverse accelerate
		else if (cursors.down.isDown){ ship.body.reverse(200); }
};

</script>

</body>
</html>